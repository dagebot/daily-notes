---
import { getCollection } from 'astro:content';
import Layout from '../../layouts/Layout.astro';

export async function getStaticPaths() {
  const posts = await getCollection('posts');
  return posts.map((post) => ({
    params: { slug: post.slug },
    props: { post },
  }));
}

const { post } = Astro.props;
const { Content } = await post.render();
---

<Layout title={`${post.data.title} | 每日记录`}>
  <article class="post">
    <header>
      <span class="date">{post.data.date.toISOString().split('T')[0]}</span>
      <h1>{post.data.title}</h1>
    </header>
    
    <div class="content">
      <Content />
    </div>
    
    <div class="back-link">
      <a href="/">← 返回首页</a>
    </div>
  </article>
</Layout>

<style>
  .post { max-width: 640px; margin: 0 auto; }
  .post header { margin-bottom: 2rem; text-align: center; }
  .date { font-family: var(--font-hand); color: var(--color-muted); font-size: 1rem; }
  h1 { font-family: var(--font-hand); font-size: 2rem; margin-top: 0.5rem; color: var(--color-text); }
  .content { font-size: 1.1rem; line-height: 2; }
  .content :global(p) { margin-bottom: 1.5rem; }
  .content :global(.signature) { font-family: var(--font-hand); color: var(--color-muted); margin-top: 2rem; }
  .back-link { margin-top: 3rem; padding-top: 2rem; border-top: 1px solid var(--color-border); }
  .back-link a { text-decoration: none; color: var(--color-muted); transition: color 0.2s; }
  .back-link a:hover { color: var(--color-accent); }
</style>
